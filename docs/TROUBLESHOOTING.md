# ğŸš¨ æ•…éšœæ’æŸ¥

## é—®é¢˜ 1ï¼šè¯·æ±‚è¶…æ—¶

### ç—‡çŠ¶

```
âŒ è¯·æ±‚å¤±è´¥: Request timeout after 10000ms
```

### åŸå› 

- API å“åº”æ…¢
- ç½‘ç»œä¸ç¨³å®š
- æœåŠ¡å™¨è´Ÿè½½é«˜

### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ 1ï¼šå¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆå…¨å±€é…ç½®ï¼‰**

```bash
go-gen config --global
# è®¾ç½® timeout: 30000
```

**æ–¹æ¡ˆ 2ï¼šå¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆé¡¹ç›®é…ç½®ï¼‰**

ç¼–è¾‘ `.apirc.json`ï¼š

```json
{
  "timeout": 30000
}
```

**æ–¹æ¡ˆ 3ï¼šå¢åŠ é‡è¯•æ¬¡æ•°**

```json
{
  "timeout": 20000,
  "autoRetry": true,
  "maxRetries": 5
}
```

## é—®é¢˜ 2ï¼šåœ¨ä¸åŒé¡¹ç›®ç”Ÿæˆçš„ä»£ç ä¸ä¸€è‡´

### ç—‡çŠ¶

- é¡¹ç›® A ç”Ÿæˆçš„æ˜¯ `axios`
- é¡¹ç›® B ç”Ÿæˆçš„æ˜¯ `@/utils/request`
- å›¢é˜Ÿæˆå‘˜ä»£ç é£æ ¼ä¸ç»Ÿä¸€

### åŸå› 

æ²¡æœ‰ä½¿ç”¨é¡¹ç›®é…ç½®

### è§£å†³æ–¹æ¡ˆ

**ä½¿ç”¨é¡¹ç›®é…ç½®ï¼š**

```bash
cd your-project
go-gen init
```

ç¼–è¾‘ `.apirc.json`ï¼š

```json
{
  "requestModule": "@/utils/request",
  "typePrefix": "I",
  "apiPrefix": "api"
}
```

**æäº¤åˆ° Gitï¼š**

```bash
git add .apirc.json
git commit -m "chore: add api generator config"
```

å›¢é˜Ÿæˆå‘˜ `git pull` åä¼šè‡ªåŠ¨ä½¿ç”¨ç›¸åŒé…ç½®ã€‚

---

## é—®é¢˜ 3ï¼šè®¤è¯å¤±è´¥

### ç—‡çŠ¶

```
âŒ è¯·æ±‚å¤±è´¥: HTTP 401: Unauthorized
```

### åŸå› 

- Token è¿‡æœŸ
- Token æ ¼å¼é”™è¯¯
- æƒé™ä¸è¶³

### è§£å†³æ–¹æ¡ˆ

**æ£€æŸ¥ Tokenï¼š**

```bash
# é‡æ–°è¾“å…¥æ­£ç¡®çš„ Token
go-gen fetch
ğŸ” æ˜¯å¦éœ€è¦è®¤è¯? Bearer Token
ğŸ”‘ è¯·è¾“å…¥ Bearer Token: <æ–°çš„token>
```

**æ£€æŸ¥ Token æ ¼å¼ï¼š**

- Bearer Token: `Bearer xxxxx` æˆ– `xxxxx`
- Cookie: `key=value; key2=value2`

**æµ‹è¯• Tokenï¼š**

```bash
# ä½¿ç”¨ curl æµ‹è¯•
curl -H "Authorization: Bearer YOUR_TOKEN" https://api.example.com/users
```

---

## é—®é¢˜ 4ï¼šOpenAPI æ–‡æ¡£è§£æå¤±è´¥

### ç—‡çŠ¶

```
âŒ OpenAPI è§£æå¤±è´¥: Invalid schema format
```

### åŸå› 

- OpenAPI æ–‡æ¡£æ ¼å¼ä¸æ­£ç¡®
- ç‰ˆæœ¬ä¸æ”¯æŒï¼ˆä»…æ”¯æŒ 2.0 å’Œ 3.0ï¼‰
- URL è®¿é—®å¤±è´¥

### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ 1ï¼šæ£€æŸ¥æ–‡æ¡£æ ¼å¼**

```bash
# ä½¿ç”¨åœ¨çº¿éªŒè¯å™¨
https://editor.swagger.io/
```

**æ–¹æ¡ˆ 2ï¼šæœ¬åœ°æ–‡ä»¶**

```bash
# ä¸‹è½½æ–‡æ¡£åˆ°æœ¬åœ°
curl -o swagger.json https://api.example.com/swagger.json

# ä½¿ç”¨æœ¬åœ°æ–‡ä»¶
go-gen openapi ./swagger.json
```

**æ–¹æ¡ˆ 3ï¼šæ£€æŸ¥ç‰ˆæœ¬**

æ”¯æŒçš„ç‰ˆæœ¬ï¼š

- OpenAPI 3.0.x âœ…
- OpenAPI 2.0 (Swagger) âœ…
- OpenAPI 3.1.x âŒï¼ˆæš‚ä¸æ”¯æŒï¼‰

---

## é—®é¢˜ 5ï¼šç”Ÿæˆçš„ä»£ç æœ‰è¯­æ³•é”™è¯¯

### ç—‡çŠ¶

```typescript
// ç”Ÿæˆçš„ä»£ç 
export interface UserResponse {
  id: number;
  name: ;  // è¯­æ³•é”™è¯¯
}
```

### åŸå› 

- API å“åº”æ•°æ®ä¸è§„èŒƒ
- JSON æ ¼å¼é”™è¯¯
- ç©ºå€¼å¤„ç†é—®é¢˜

### è§£å†³æ–¹æ¡ˆ

**æ£€æŸ¥ API å“åº”ï¼š**

```bash
# ä½¿ç”¨ curl æ£€æŸ¥å“åº”
curl https://api.example.com/users
```

**æ£€æŸ¥ JSON æ ¼å¼ï¼š**

```json
// âœ… æ­£ç¡®
{
  "name": "John",
  "age": 30
}

// âŒ é”™è¯¯
{
  "name": "John",
  "age": ,  // ç¼ºå°‘å€¼
}
```

**æ‰‹åŠ¨ä¿®å¤ï¼š**

ç”Ÿæˆåæ‰‹åŠ¨æ£€æŸ¥å’Œä¿®å¤ç±»å‹å®šä¹‰ã€‚

---

## é—®é¢˜ 6ï¼šç±»å‹åå†²çª

### ç—‡çŠ¶

```
âš ï¸  ç±»å‹åå†²çªï¼Œå·²è‡ªåŠ¨é‡å‘½å: UserResponse â†’ UserResponse1
```

### åŸå› 

- åŒä¸€ç›®å½•å·²å­˜åœ¨ç›¸åŒç±»å‹å
- å¤šæ¬¡ç”Ÿæˆç›¸åŒæ¥å£

### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ 1ï¼šæ¥å—è‡ªåŠ¨é‡å‘½å**

è‡ªåŠ¨é‡å‘½åä¸º `UserResponse1`, `UserResponse2` ç­‰ã€‚

**æ–¹æ¡ˆ 2ï¼šæ‰‹åŠ¨åˆå¹¶**

```typescript
// æ£€æŸ¥æ˜¯å¦æ˜¯é‡å¤å®šä¹‰
// å¦‚æœæ˜¯ï¼Œåˆ é™¤å…¶ä¸­ä¸€ä¸ª
export interface UserResponse { ... }
export interface UserResponse1 { ... }  // åˆ é™¤
```

**æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ä¸åŒçš„è¾“å‡ºç›®å½•**

```bash
go-gen fetch
ğŸ“‚ è¾“å‡ºç›®å½•: ğŸ” è‡ªå®šä¹‰è·¯å¾„
# è¾“å…¥ä¸åŒçš„è·¯å¾„
```

---

## é—®é¢˜ 7ï¼šæ‰¾ä¸åˆ° request æ¨¡å—

### ç—‡çŠ¶

```typescript
// ç”Ÿæˆçš„ä»£ç 
import request from '@/utils/request'; // æ‰¾ä¸åˆ°æ¨¡å—
```

### åŸå› 

é¡¹ç›®ä¸­æ²¡æœ‰å¯¹åº”çš„ request æ¨¡å—

### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ 1ï¼šåˆ›å»º request æ¨¡å—**

```typescript
// src/utils/request.ts
import axios from 'axios';

const request = axios.create({
  baseURL: '/api',
  timeout: 10000,
});

export default request;
```

**æ–¹æ¡ˆ 2ï¼šä¿®æ”¹é…ç½®**

```json
{
  "requestModule": "axios" // ç›´æ¥ä½¿ç”¨ axios
}
```

**æ–¹æ¡ˆ 3ï¼šæ‰‹åŠ¨ä¿®æ”¹å¯¼å…¥**

ç”Ÿæˆåæ‰‹åŠ¨ä¿®æ”¹ import è·¯å¾„ã€‚

---

## é—®é¢˜ 8ï¼šæ‰¹é‡ç”Ÿæˆå¤±è´¥

### ç—‡çŠ¶

```
âš¡ æ‰¹é‡ç”Ÿæˆä¸­... (1/50): GET /users
âŒ ç”Ÿæˆå¤±è´¥: 5 ä¸ªæ¥å£
```

### åŸå› 

- éƒ¨åˆ†æ¥å£å®šä¹‰ä¸å®Œæ•´
- operationId ç¼ºå¤±
- å“åº”æ ¼å¼ä¸æ ‡å‡†

### è§£å†³æ–¹æ¡ˆ

**æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š**

æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºï¼Œæ‰¾åˆ°å¤±è´¥çš„æ¥å£ã€‚

**é€ä¸ªç”Ÿæˆï¼š**

```bash
go-gen openapi ./swagger.json
# é€‰æ‹© "é€ä¸ªç”Ÿæˆ"
# è·³è¿‡æœ‰é—®é¢˜çš„æ¥å£
```

**ä¿®å¤ OpenAPI æ–‡æ¡£ï¼š**

ç¡®ä¿æ¯ä¸ªæ¥å£éƒ½æœ‰ï¼š

- operationId
- responses
- æ­£ç¡®çš„ schema å®šä¹‰

---

## é—®é¢˜ 9ï¼šé…ç½®ä¸ç”Ÿæ•ˆ

### ç—‡çŠ¶

è®¾ç½®äº†é…ç½®ï¼Œä½†ç”Ÿæˆçš„ä»£ç æ²¡æœ‰ä½¿ç”¨é…ç½®ã€‚

### åŸå› 

é…ç½®æ–‡ä»¶è·¯å¾„é”™è¯¯æˆ–æ ¼å¼é”™è¯¯

### è§£å†³æ–¹æ¡ˆ

**æ£€æŸ¥é…ç½®æ–‡ä»¶ä½ç½®ï¼š**

```bash
# é¡¹ç›®é…ç½®
ls .apirc.json

# å…¨å±€é…ç½®
ls ~/.apirc.json
```

**æ£€æŸ¥ JSON æ ¼å¼ï¼š**

```bash
# éªŒè¯ JSON æ ¼å¼
cat .apirc.json | jq .
```

**æŸ¥çœ‹å½“å‰é…ç½®ï¼š**

```bash
go-gen config --show
```

**é‡æ–°åˆå§‹åŒ–ï¼š**

```bash
go-gen init --force  # å¼ºåˆ¶é‡æ–°åˆ›å»º
```

---

## è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ¡ˆéƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

å‘é‚®ä»¶åˆ°ï¼šbg2582266166@gmail.com
